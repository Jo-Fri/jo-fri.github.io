<!DOCTYPE html>
<html lang="de">
    <head>
        <title>DCC_ATtiny85</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="index, follow">
        <meta name="keywords" content="ATtiny85, Bootloader, DCC, Decoder, Eisenbahn">
        <link rel="stylesheet" href="../../main.css">
    </head>
    <body class="pagecontent">
        <div class="layout">
            <h1 class="titel">DCC Funktionsdecoder mit ATtiny85</h1>
            <div>
            <h2>mit den Digispark ATtiny85 steuere ich die Beleuchtungen von Wagons</h2>
			<p>	für die Wagenbeleuchtung verwende ich einen Digispark ATtiny85 als DCC Decoder, welcher mit einer Lok Adresse und den Funktionstasten F0, F1 - F3 (-F12) die LED's ansteuert, es werden nur sehr wenige Bauteile dafür benötigt.
			</p>
			<p>				
			<span style="font-size:10pt">Voraussetzung alt: 
			<br> Erweiterung der Arduino IDE Einstellungen um Zusätzliche Boardverwalter-URL: <em> http://digistump.com/package_digistump_index.json</em> (alt, offline, Stand: 03.2024)
			<br> Werkzeug Board Auswahl: <em>Digispark (Default - 16.5mhz)</em>
			</span>
			<br><br> Voraussetzung: 
			<br> Erweiterung der Arduino IDE Einstellungen um Zusätzliche Boardverwalter-URL:  <em> https://drazzy.com/package_drazzy.com_index.json</em>	
            <br> Board-Verwaltung: suche nach ATTiny85 und installiere:  <em>ATTinycore</em> von Spence Konde V1.5.2 
            <br> Bibliotheksverwaltung: suche nach NMRA und installiere: <em>NmraDcc</em> von Alex Shepherd, Wolfgang Kuffer, ... V2.0.17
            <br> Board Auswahl: <em>"ATTinyCore - ATtiny85 (Micronucleus / DigiSpark)" </em>
			</p>
			<p>	Hinweis: ich hatte folgenden Fehlermeldung in Windows 10, beim hochladen zum ATtiny85: "Fehlgeschlagenes Hochladen: Hochladefehler: exit status 0xc0000135"  (libusb0.dll nicht gefunden)
            <br> Abhilfe war C:\Users\username\AppData\Local\Arduino15\packages\ATTinyCore\tools\micronucleus\2.5-azd1b\Drivers\DPinst64.exe als Administrator ausführen.
			</p>
			<p>            
			<a class="bild45" href="ATtiny85_DCC_Decoder_schematic.jpg" target="_blank" title="ATtiny85_DCC_Decoder_schematic.jpg"><img src="ATtiny85_DCC_Decoder_schematic.jpg" class="bild45"  alt="ATtiny85_DCC_Decoder_schematic.jpg"></a>
			<a class="bild45" href="Wagen.jpg" target="_blank" title="Wagen.jpg"><img src="Wagen.jpg" class="bild45"  alt="Wagen.jpg"></a>
			<br> der Standard <a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/tree/master/firmware/releases"> Bootloader </a> <em>t85_default.hex</em> benötigt ca. 6 Sec. Bootloaderzeit. 
			</p>
			<p>darum <em>Update der ATiny85 Bootloader Firmware über USB</em>, damit wird die Bootloaderzeit auf 300 mSec minimiert. 
			<br> Download von <a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/releases/tag/v2.6.0"> Source code (zip) </a> den Inhalt der Datei: <em>micronucleus-firmware-2.6.0.zip</em> entpacken. <span style="font-size:7pt">(externer Link)</span>
            <br> In das Verzeichnis nach ...<em>\micronucleus-firmware-2.6.0\utils\ </em> wechseln und  <em> 1_Upgrade-t85_entry_on_powerOn_activePullup_fastExit_noLED.cmd</em> ausführen, 
			<br> nun wird man aufgefordert den ATtiny85 an einen USB-Anschluss anzustecken, (auch im eingelöteten Zustand),
			<br> dann wird die Bootloader Firmware <em> upgrade-t85_entry_on_powerOn_activePullup_fastExit_noLED.hex </em> auf Version 2.6 aktualisiert.
			<br> <br> anschließend mein <em>DCC Funktionsdecoder Sketch für den ATtiny85 </em>   
            <a href="DCC_ATtiny85.zip" target="_blank" title="DCC_ATtiny85.zip">DCC_ATtiny85.zip</a> <span style="font-size:7pt">(aktualisiert 04.2024)</span>
			<br> DCC-Adresse "This_Decoder_Address" anpassen und mit der Arduino IDE, auch im eingelöteten Zustand programmieren. 
			</p>
			<p>	getestet mit diesen Digispark ATtiny85 Varianten: 
			<br><br>
			<a class="bild10" href="ATtiny85_USB-A.jpg" target="_blank" title="ATtiny85_USB-A.jpg"><img src="ATtiny85_USB-A.jpg" class="bild10"  alt="ATtiny85_USB-A.jpg"></a>
			<a class="bild10" href="ATtiny85_mini.jpg" target="_blank" title="ATtiny85_mini.jpg"><img src="ATtiny85_mini.jpg" class="bild10"  alt="ATtiny85_mini.jpg"></a>
			</p>
			<p>
            <br>Hier weitere Information zu Digispark ATtiny85 <span style="font-size:7pt">(externe Links)</span>
            <br><a target="_blank" class="big" href="https://wolles-elektronikkiste.de/attiny-mit-arduino-code-programmieren ">Wolles-Elektronikkiste.de </a> ATtiny mit Arduino Code programmieren
            <br><a target="_blank" class="big" href="https://wolles-elektronikkiste.de/digispark-die-bequeme-attiny85-alternative ">Wolles-Elektronikkiste.de </a> Digispark – die bequeme ATtiny85 Alternative
            <br><a target="_blank" class="big" href="https://www.robokalle.de/elektronik%20dcc-lichtsignal%20decoder.htm" >Robokalle </a> ATtiny85 DCC-Lichtsignaldecoder für LED-Lichtsignale
			<br><a target="_blank" class="big" href="https://github.com/ArminJo/DigistumpArduino">"https://github.com/ArminJo/DigistumpArduino</a> Bootloader Infos
			<br><a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware">"https://github.com/ArminJo/micronucleus-firmware</a> Micronucleus USB Bootloader for ATtinies / Digisparks
			<br><a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/tree/master/firmware/releases"> Bootloader releases</a> aktuelle micronucleus-firmware Bootloader Versionen
			<br><a target="_blank" class="big" href="https://www.youtube.com/watch?v=fRroyd8sVsE"> Bootloader </a> Methode 1 Video von Anfang an bis 4:20 Minuten
			</p>
            <br><br>
            </div>
			<div class="uplink"><a href="#top" class="uplink" title="zum Seitenanfang">nach oben ...</a></div>  			
        </div>
 		<div class="impress">
                <ul>
                    <li>JoFri</li>
                    <li> <a class="icon-mail" href="mailto:jofri.bahn@web.de">e-Mail</a> </li>
                    <li>Stand: 01.2025</li>
                </ul>
        </div>
    </body>
</html>
