<!DOCTYPE html>
<html lang="de">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <meta name="robots" content="index, follow">
        <meta name="keywords" content="ATtiny85, DCC, Decoder, Eisenbahn, Steuerung">
        <link rel="stylesheet" href="../../main.css">
        <title>DCC_ATtiny85</title>
    </head>
    <body class="pagecontent">
        <div class="layout">
            <h1 class="titel">DCC Funktionsdecoder mit ATtiny85</h1>
            <div>
            <h2>mit den Digispark ATtiny85 steuere ich die Beleuchtungen von Wagons</h2>
			<p>	für die Wagenbeleuchtung verwende ich einen Digispark ATtiny85 als DCC Decoder, welcher mit einer Lok Adresse und den Funktionstasten F0, F1 - F3 (-F12) die LED's ansteuert, es werden nur sehr wenige Bauteile dafür benötigt.
			</p>
			<p>				
			<span style="font-size:10pt">Voraussetzung alt: 
			<br> Erweiterung der Arduino IDE Einstellungen um Zusätzliche Boardverwalter-URL: <em> http://digistump.com/package_digistump_index.json</em> (alt, offline, Stand: 03.2024)
			<br> Werkzeug Board Auswahl: <em>Digispark (Default - 16.5mhz)</em>
			</span>
			<br><br> Voraussetzung: 
			<br> Erweiterung der Arduino IDE Einstellungen um Zusätzliche Boardverwalter-URL:  <em> https://drazzy.com/package_drazzy.com_index.json </em>	
			<br> Werkzeug Board Auswahl: <em>"ATtiny85 (Micronucleus / DigiSpark)" </em>
			</p>
			<p>	Benötigt wird auch die Bibliothek:  
			<a target="_blank" href="https://reference.arduino.cc/reference/en/libraries/nmradcc/"><em>DCC_Decoder.h</em> </a> in der Version 1.4.2, neuere Versionen funktionieren nicht mehr.
			<span style="font-size:7pt">(externer Link)</span>
			<br> Den Inhalt von <em>NmraDcc-1.4.2.zip</em> nach <em>C:\Users\username\Documents\Arduino\libraries\ </em> kopieren und durch die IDE <em>nicht</em> aktualisieren lassen. 
			</p>
			<p>            
			<a class="bild45" href="ATtiny85_Plan.jpg" target="_blank" title="ATtiny85_Plan.jpg"><img src="ATtiny85_Plan.jpg" class="bild45"  alt="ATtiny85_Plan"></a>
			<a class="bild45" href="Wagen.jpg" target="_blank" title="Wagen.jpg"><img src="Wagen.jpg" class="bild45"  alt="Wagen.jpg"></a>
			<br> Hier mein DCC Funktionsdecoder Sketch für den ATtiny85   
            <a href="DCC_ATtiny85.zip" target="_blank" title="DCC_ATtiny85.zip">DCC_ATtiny85.zip</a> <span style="font-size:7pt">(aktualisiert 04.2024)</span>
			<br> dieses kann auch im eingelöteten Zustand mit der Arduino IDE programmiert werden.
			<br> ich verwende (noch) den Standard <a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/tree/master/firmware/releases"> Bootloader </a> <em>t85_default.hex</em>, dieser benötigt ca. 6 Sec. Bootloaderzeit. 
			<br><br> getestet mit diesen Digispark ATtiny85 Varianten: 
			<br><br>
			<a class="bild10" href="ATtiny85_USB-A.jpg" target="_blank" title="ATtiny85_USB-A.jpg"><img src="ATtiny85_USB-A.jpg" class="bild10"  alt="ATtiny85_USB-A.jpg"></a>
			<a class="bild10" href="ATtiny85_mini.jpg" target="_blank" title="ATtiny85_mini.jpg"><img src="ATtiny85_mini.jpg" class="bild10"  alt="ATtiny85_mini.jpg"></a>
			</p>
			<p>
			<br><em>Update der ATiny85 Bootloader Firmware über USB</em>, damit wird die Bootloaderzeit auf 300 mSec minimiert. <span style="font-size:7pt">(externer Link)</span>
			<br> Download von <a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/releases/tag/v2.6.0"> Source code (zip) </a> Datei Inhalt: <em>micronucleus-firmware-2.6.0.zip</em> entpacken. 
            <br> In das Verzeichnis nach <em>...\micronucleus-firmware-2.6.0\utils\ </em> wechseln und  <em> 1_Upgrade-t85_entry_on_powerOn_activePullup_fastExit_noLED.cmd</em> ausführen, 
			<br> nun wird man aufgefordert den ATtiny85 an einen USB-Anschluss anzustecken, 
			<br> anschließend wird die Bootloader Firmware mit <em> upgrade-t85_entry_on_powerOn_activePullup_fastExit_noLED.hex </em> aktualisiert.
			</p>
			<p>			
			<br> falls ein ATiny85 plötzlich nicht mehr reagieren sollte, muss der Bootlader und anschließend dieses Sketch erneut aufgespielt werden. (bis jetzt hatte hatte ich noch nie einen defekten Tiny85)
			</p>
			<p>
            <br>weitere gute Information zu Digispark ATtiny85 unter: 
            <br><a target="_blank" class="big" href="https://wolles-elektronikkiste.de/attiny-mit-arduino-code-programmieren ">Wolles-Elektronikkiste.de </a> ATtiny mit Arduino Code programmieren <span style="font-size:7pt">(externer Link)</span>
            <br><a target="_blank" class="big" href="https://wolles-elektronikkiste.de/digispark-die-bequeme-attiny85-alternative ">Wolles-Elektronikkiste.de </a> Digispark – die bequeme ATtiny85 Alternative <span style="font-size:7pt">(externer Link)</span>
            <br><a target="_blank" class="big" href="https://www.robokalle.de/elektronik%20dcc-lichtsignal%20decoder.htm" >Robokalle </a> ATtiny85 DCC-Lichtsignaldecoder für LED-Lichtsignale<span style="font-size:7pt">(externer Link)</span>
			<br><a target="_blank" class="big" href="https://github.com/ArminJo/DigistumpArduino">"https://github.com/ArminJo/DigistumpArduino</a> Bootloader Infos <span style="font-size:7pt">(externer Link)</span>
			<br><a target="_blank" class="big" href="https://github.com/ArminJo/micronucleus-firmware/tree/master/firmware/releases"> Bootloader releases</a> aktuelle micronucleus-firmware Bootloader Versionen <span style="font-size:7pt">(externer Link)</span>
			<br><a target="_blank" class="big" href="https://www.youtube.com/watch?v=fRroyd8sVsE"> Bootloader </a> Methode 1 Video von Anfang an bis 4:20 Minuten, fertig <span style="font-size:7pt">(externer Link)</span>
			
			
			</p>
            <br><br>
            </div>
            </div>
			<div class="impress">
                <ul>
                    <li>JoFri</li>
                    <li>
                        <a class="icon-mail" href="mailto:jofri.bahn@web.de">e-Mail</a>
                    </li>
                    <li>Stand: 04.2024</li>
                </ul>
        </div>
    </body>
</html>
